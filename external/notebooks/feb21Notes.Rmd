---
title: "feb21Notes"
author: "Harrison Leduc"
date: "2024-02-21"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r}
for(i in 1:10) {
  print(i * 10)
}
#forgot the 'i in' portion...

v <- NULL
sapply(1:10, function(x) {
  v[x] <- x * 10
})

#better to do below
v <- sapply(1:10, function(x) x * 10)
v
```


Class Notes:
Reading and Writing data
```{r}
data_tib <- read.csv(
  "~/geospaar/inst/extdata/cdf_corn.csv"
)
# "/Users/lestes/Dropbox/teaching/geog246346/geospaar/inst/extdata/cdf_corn.csv"
# Above is HARD-CODED. VERY BAD. Will lose points on final project for this!!!

str(data_tib)

# Working directory --------------
getwd()
list.files(".") #lists files in current directoy
list.files("./geospaar/")
list.files("../geospaar/")
list.files("~")
dir("~") #both this line and line above give the directory 
setwd("../geospaar/")
getwd()
setwd("../hjl246/")
getwd()

setwd("../geospaar/")
library(readr)
dat_tab2 <-readr::read_csv("./inst/extdata/cdf_corn.csv")

dir("inst/extdata/", pattern = "^f.*.csv", full.names = TRUE) #automates the process of getting the files in
#carrot means want all strings that begin with the letter 'f'. does not include 'F'

dir("inst/extdata/", pattern = "f.*.csv", full.names = TRUE) 
# provides anything that contains f and is csv

#there is a way to make it case insensitive!
dir("inst/extdata/", pattern = "^[F|f].*.csv", full.names = TRUE)

#go back to project directory, above functions will not work!
setwd("../hjl246/")



# User Directory -------------------------
path.expand("~") #gives the entire file path


# Writing Files --------------------------
readr::write_csv(data_tib, ) #will use current working directory

save(data_tib, file = "temp.rda") #not a csv, a binary data scructure can be read using load

data_tib <- NULL
# or can do
rm(data_tib)

load(file = "temp.rda") 


# Dates with lubridate --------------------
date1 <- "2022-03-01"
class(date1)
library(lubridate)
date1 <- as_date("2022-03-01")
print(date1)
class(date1)
# the class is now class Date. Important because:
date2 <- "2024-03-01"
date2 - date1 #can't do math on characters
date2 <- as_date("2024-03-01", format = ("%Y/%m/%d")) #format is causing an error?


?as_date
date2 - date1

library(dplyr)
(as_date(date2) - as_date(date1)) %>% weeks(.) #not exactly what we wanted but
# know there are more lubridate options
?lubridate
?weeks


as_date("Apr 3, 1999", format = "%b %d, %Y")

d <- data.frame(date = c("1/1/2024", "3/1/2024", "12/1/2024"),
           values = c(1, 10, 5)
           )
plot(d$values)

d <- d %>% 
  mutate(dates = as_date(d$date, format = "%m/%d/%Y"))
plot(d$dates, d$values)
```
